#!/bin/bash

export __dir="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
export __dir=$( dirname ${__dir} )

export __port=8400
export __ip=0.0.0.0
export __tag=IptWr

while getopts 'i:p:t:' __flag; do
  case "${__flag}" in
    i)
        export __ip=${OPTARG}
        ;;
    p)
        export __port=${OPTARG}
        ;;
    t)
        export __tag=${OPTARG}
        ;;
    *)
        error "Unexpected option ${__flag}"
        ;;
  esac
done

pushd ${__dir}/src/
    thin -d -a ${__ip} -p ${__port} -R ./config.ru --tag ${__tag} start
popd
